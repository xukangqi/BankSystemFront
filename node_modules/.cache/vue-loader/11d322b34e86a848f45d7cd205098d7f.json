{"remainingRequest":"/Users/xyy/Documents/GitHub/BankSystemFront-xyy/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xyy/Documents/GitHub/BankSystemFront-xyy/src/views/admin/investment/QueryFund.vue?vue&type=style&index=0&id=f677a1aa&scoped=true&lang=css&","dependencies":[{"path":"/Users/xyy/Documents/GitHub/BankSystemFront-xyy/src/views/admin/investment/QueryFund.vue","mtime":1540196002897},{"path":"/Users/xyy/Documents/GitHub/BankSystemFront-xyy/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/xyy/Documents/GitHub/BankSystemFront-xyy/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/xyy/Documents/GitHub/BankSystemFront-xyy/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xyy/Documents/GitHub/BankSystemFront-xyy/node_modules/cache-loader/dist/cjs.js","mtime":1540002788970},{"path":"/Users/xyy/Documents/GitHub/BankSystemFront-xyy/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.custom-filter-dropdown {\n  padding: 8px;\n  border-radius: 6px;\n  background: #fff;\n  box-shadow: 0 1px 6px rgba(0, 0, 0, .2);\n}\n\n.custom-filter-dropdown input {\n  width: 130px;\n  margin-right: 8px;\n}\n\n.custom-filter-dropdown button {\n  margin-right: 8px;\n}\n\n.highlight {\n  color: #f50;\n}\n",{"version":3,"sources":["QueryFund.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2MA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"QueryFund.vue","sourceRoot":"src/views/admin/investment","sourcesContent":["<template>\n<div>\n  <a-table :dataSource=\"data\" :columns=\"columns\" :loading=\"loading\">\n    <div slot=\"filterDropdown\" slot-scope=\"{ setSelectedKeys, selectedKeys, confirm, clearFilters }\" class='custom-filter-dropdown'>\n      <a-input\n        ref=\"searchInput\"\n        placeholder='查询基金代码'\n        :value=\"selectedKeys[0]\"\n        @change=\"e => setSelectedKeys(e.target.value ? [e.target.value] : [])\"\n        @pressEnter=\"() => handleSearch(selectedKeys, confirm)\"\n      />\n      <a-button type='primary' @click=\"() => handleSearch(selectedKeys, confirm)\">查询</a-button>\n      <a-button type='danger' @click=\"() => handleReset(clearFilters)\">重置</a-button>\n    </div>\n    <a-icon slot=\"filterIcon\" slot-scope=\"filtered\" type='search' :style=\"{ color: filtered ? '#108ee9' : '#aaa' }\" />\n\n    <template slot=\"operation\" slot-scope=\"text, record\">\n                <a-button type='primary' @click=\"() => showDrawer(record.fundId)\">显示详情</a-button>\n            </template>\n\n<template slot=\"customRender\" slot-scope=\"text\">\n      <span v-if=\"searchText\">\n        <template v-for=\"(fragment, i) in (text+'').split(new RegExp(`(?<=${searchText})|(?=${searchText})`, 'i'))\">\n          <span v-if=\"fragment.toLowerCase() === searchText.toLowerCase()\" :key=\"i\" class=\"highlight\">{{fragment}}</span>\n          <template v-else>{{fragment}}</template>\n        </template>\n      </span>\n      <template v-else>{{text}}</template>\n    </template>\n  </a-table>\n\n  <a-drawer\n      width=400\n      placement=\"right\"\n      :closable=\"false\"\n      @close=\"onClose\"\n      :visible=\"visible\"\n      style=\"height: calc(100% - 55px);overflow: 'auto';paddingBottom: 53px;\"\n    >\n      <div style=\"background:#ECECEC; padding:30px;\">\n  \t\t<a-card title=\"基金产品详情\" :bordered=\"false\" style=\"width: 300px\" hoverable>\n\t    \t<p>基金代码：{{detailValue.fundId}}</p>\n\t    \t<p>交易类型：{{detailValue.type}}</p>\n\t    \t<p>申购费率：{{detailValue.purchaseRate}}%</p>\n\t    \t<p>基金单位净值：{{detailValue.netAssetValue}}</p>\n\t    \t<p>赎回费率：{{detailValue.redemptionRate}}%</p>\n\t    \t<p>记录时间：{{detailValue.recordDate}}</p>\n  \t\t</a-card>\n\t  </div>\n      <div\n        :style=\"{\n          position: 'absolute',\n          bottom: 0,\n          width: '100%',\n          borderTop: '1px solid #e8e8e8',\n          padding: '10px 16px',\n          textAlign: 'right',\n          left: 0,\n          background: '#fff',\n          borderRadius: '0 0 4px 4px',\n        }\"\n      >\n        <a-button\n          @click=\"onClose\"\n        >\n          关闭\n        </a-button>\n      </div>\n    </a-drawer>\n  </div>\n\n</template>\n\n<script>\n\nexport default {\n\tmounted() {\n\t\tthis.loading = true;\n\t\tthis.$axios({\n                    method: \"get\",\n                    url: \"/investment/fundproduct\"\n                })\n                .then(res => {\n                    let result = res.data;\n                    let status = result.status;\n                    if (status == 200) {\n                    \tthis.loading = false;\n                    \tfor(let i=0; i<result.data.length; i++) {\n                    \t\tresult.data[i].type = (result.data[i].type==0?\"认购/申购\":\"赎回\");\n                    \t\tresult.data[i].purchaseRate = result.data[i].purchaseRate.toFixed(2);\n                    \t\tresult.data[i].netAssetValue = result.data[i].netAssetValue.toFixed(4);\n                    \t\tresult.data[i].redemptionRate = result.data[i].redemptionRate.toFixed(2);\n                    \t}\n                        this.data = result.data;\n                        \n                    } else {\n                        this.$notification.open({\n                            message: \"错误\",\n                            description: result.msg\n                        });\n                    }\n                })\n                .catch(err => {\n                    console.log(\"通信失败，请稍后再试\");\n                    this.$notification.open({\n                        message: \"错误\",\n                        description: \"服务器开小差了,请稍后再试\"\n                    });\n                });\n    },\n  data () {\n    return {\n      data:[],\n      loading:false,\n      visible: false,\n      searchText: '',\n      detailValue: {},\n      columns: [\n      \t{\n        title: '基金代码',\n\t\tdataIndex: 'fundId',\n\t\tkey:'fundId',\n        scopedSlots: {\n          filterDropdown: 'filterDropdown',\n          filterIcon: 'filterIcon',\n          customRender: 'customRender',\n        },\n        onFilter: (value, record) => (record.fundId + \"\").includes(value),\n        onFilterDropdownVisibleChange: (visible) => {\n          if (visible) {\n            setTimeout(() => {\n              this.$refs.searchInput.focus()\n            })\n          }\n        },\n      },\n      {\n        title: '交易类型',\n        dataIndex: 'type',\n        key: 'type',\n        filters: [{\n            text: \"认购/申购\",\n            value: \"认购/申购\"\n            },\n            {\n            \ttext: \"赎回\",\n            \tvalue: \"赎回\"\n            }\n            ],\n            onFilter: (value, record) => record.type == value\n      }, {\n\t\t  title: '申购费率',\n\t\t  dataIndex: 'purchaseRate',\n\t\t}, {\n\t\t  title: ' 基金单位净值',\n\t\t  dataIndex: 'netAssetValue',\n\t\t}, {\n\t\t  title: '赎回费率',\n\t\t  dataIndex: 'redemptionRate',\n\t\t}, {\n\t\t  title: '记录时间',\n\t\t  dataIndex: 'recordDate',\n\t\t}, {\n\t\t\ttitle: '操作',\n\t\t\tdataIndex: 'operation',\n\t\t\tscopedSlots: {\n\t\t\t\tcustomRender: 'operation'\n\t\t\t}\n\t\t}],    \n\t}\n  },\n  methods: {\n    handleSearch (selectedKeys, confirm) {\n      confirm()\n      this.searchText = selectedKeys[0]\n      console.log(this.searchText)\n    },\n\n    handleReset (clearFilters) {\n      clearFilters()\n      this.searchText = ''\n    },\n    showDrawer(value) {\n      this.visible = true;\n      this.detailValue = this.showDetail(value);\n    },\n    onClose() {\n      this.visible = false\n    },\n    showDetail(fundId){\n    \tlet dataDetail = this.data;\n    \tlet i;\n    \tfor(i=0; i<dataDetail.length; i++) {\n    \t\tif(dataDetail[i].fundId == fundId) {\n    \t\t\tbreak;\n    \t\t}\n    \t}\n    \treturn dataDetail[i];\n    }\n  },\n}\n</script>\n<style scoped>\n.custom-filter-dropdown {\n  padding: 8px;\n  border-radius: 6px;\n  background: #fff;\n  box-shadow: 0 1px 6px rgba(0, 0, 0, .2);\n}\n\n.custom-filter-dropdown input {\n  width: 130px;\n  margin-right: 8px;\n}\n\n.custom-filter-dropdown button {\n  margin-right: 8px;\n}\n\n.highlight {\n  color: #f50;\n}\n</style>"]}]}